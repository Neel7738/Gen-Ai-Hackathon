<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="/static/css/style.css">
        {% block title %}{% endblock %}
        <style>
            /* Chatbot styles */
            #open-chatbot {
                position: fixed;
                bottom: 20px;
                right: 20px;
                width: 60px;
                height: 60px;
                background-color: #1e293b;
                color: white;
                border: none;
                border-radius: 50%;
                cursor: pointer;
                box-shadow: 0 4px 8px rgba(0,0,0,0.2);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 9998;
                transition: transform 0.2s;
            }
            #open-chatbot:hover {
                transform: scale(1.1);
            }

            #chatbot-container {
                position: fixed;
                bottom: 90px;
                right: 20px;
                width: 350px;
                height: 500px;
                border-radius: 15px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                display: none;
                flex-direction: column;
                z-index: 9999;
                background-color: white;
                overflow: hidden;
            }

            #chatbot-header {
                background-color: #1e293b;
                color: white;
                padding: 10px 15px;
                border-top-left-radius: 15px;
                border-top-right-radius: 15px;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
             #chatbot-header span {
                font-weight: bold;
            }

            #close-chatbot {
                background: none;
                border: none;
                color: white;
                font-size: 24px;
                cursor: pointer;
            }

            #chatbot-container iframe {
                width: 100%;
                height: 100%;
                border: none;
            }
        </style>
    </head>
    <body>
        {%block content%}{% endblock %}

        <div id="chatbot-container">
            <div id="chatbot-header">
                <span>EduPath Assistant</span>
                <button id="close-chatbot">&times;</button>
            </div>
            <iframe src="https://niraj-12879.app.n8n.cloud/webhook/4a410a85-84c3-4875-8718-6a45ac59b10e/chat"></iframe>
        </div>
        <button id="open-chatbot">
            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
        </button>

        <script src="{{ url_for('static', filename='js/main.js') }}"></script>
         {% block scripts %}{% endblock %}

         <script>
            document.addEventListener('DOMContentLoaded', function() {
                const openBtn = document.getElementById('open-chatbot');
                const closeBtn = document.getElementById('close-chatbot');
                const chatbotContainer = document.getElementById('chatbot-container');

                openBtn.addEventListener('click', function() {
                    if (chatbotContainer.style.display === 'none' || chatbotContainer.style.display === '') {
                        chatbotContainer.style.display = 'flex';
                        openBtn.style.display = 'none';
                    }
                });

                closeBtn.addEventListener('click', function() {
                    chatbotContainer.style.display = 'none';
                    openBtn.style.display = 'flex';
                });
            });
         </script>
    </body>
</html>